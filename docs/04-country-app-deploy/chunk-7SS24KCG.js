import{A as u,B as T,C as L,D as w,E as V,F as D,G as Y,H as M,I as y,J as N,K as Z,L as ee,P as te,R as ne,S as ie,T as U,W as O,X as I,Z as oe,a as k,b as z,c as A,d as J,e as H,f as _,g as G,h as P,i as K,j as g,k as B,l as Q,m as W,n as R,o as s,p as h,q as f,r as p,s as a,t as i,u as m,v as X,w as S,x as d,y as F,z as c}from"./chunk-3OSWFRPT.js";var C=(()=>{let t=class t{constructor(n){this.http=n,this.apiUrl="https://restcountries.com/v3.1",this.cacheStore={byCapital:{term:"",countries:[]},byCountries:{term:"",countries:[]},byRegion:{region:"Africa",countries:[]}},console.log("CountriesService initialized"),this.loadFromLocalStorage()}saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadFromLocalStorage(){let n=localStorage.getItem("cacheStore");n&&(this.cacheStore=JSON.parse(n))}getCountriesRequest(n){return this.http.get(n).pipe(A(r=>k([])),J(2e3))}searchCountryByAlphaCode(n){let r=`${this.apiUrl}/alpha/${n}`;return this.http.get(r).pipe(z(l=>l.length>0?l[0]:null),A(l=>k(null)))}searchCapital(n){let r=`${this.apiUrl}/capital/${n}`;return this.getCountriesRequest(r).pipe(_(l=>{this.cacheStore.byCapital={term:n,countries:l}}),_(()=>this.saveToLocalStorage()))}searchCountry(n){let r=`${this.apiUrl}/name/${n}`;return this.getCountriesRequest(r).pipe(_(l=>{this.cacheStore.byCountries={term:n,countries:l}}),_(()=>this.saveToLocalStorage()))}searchRegion(n){let r=`${this.apiUrl}/region/${n}`;return this.getCountriesRequest(r).pipe(_(l=>{this.cacheStore.byRegion={region:n,countries:l}}),_(()=>this.saveToLocalStorage()))}};t.\u0275fac=function(r){return new(r||t)(K(ee))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ue=e=>["/countries/by",e];function de(e,t){e&1&&(a(0,"div",2),c(1,"No hay paises que mostrar"),i())}function fe(e,t){if(e&1&&(a(0,"tr")(1,"th"),c(2),i(),a(3,"th"),c(4),i(),a(5,"th"),m(6,"img",5),i(),a(7,"th"),c(8),i(),a(9,"th"),c(10),i(),a(11,"th"),c(12),w(13,"number"),i(),a(14,"th")(15,"a",6),c(16,"Ver m\xE1s..."),i()()()),e&2){let o=t.$implicit,n=t.index;s(2),u(n+1),s(2),u(o.flag),s(2),p("src",o.flags.svg,R)("alt",o.name.common),s(2),u(o.capital),s(2),u(o.name.common),s(2),u(V(13,8,o.population)),s(3),p("routerLink",L(10,ue,o.cca3))}}function ge(e,t){if(e&1&&(a(0,"table",3)(1,"thead")(2,"tr")(3,"th"),c(4,"#"),i(),a(5,"th"),c(6,"Icon"),i(),a(7,"th"),c(8,"Bandera"),i(),a(9,"th"),c(10,"Nombre"),i(),a(11,"th"),c(12,"Capital"),i(),a(13,"th"),c(14,"Poblaci\xF3n"),i(),m(15,"th"),i()(),a(16,"tbody"),f(17,fe,17,12,"tr",4),i()()),e&2){let o=d();s(17),p("ngForOf",o.countries)}}var E=(()=>{let t=class t{constructor(){this.countries=[]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=g({type:t,selectors:[["countries-table"]],inputs:{countries:"countries"},decls:3,vars:2,consts:[["table",""],["class"," alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"table","talbe-hover"],[4,"ngFor","ngForOf"],[3,"src","alt"],[3,"routerLink"]],template:function(r,l){if(r&1&&f(0,de,2,0,"div",1)(1,ge,18,1,"ng-template",null,0,D),r&2){let v=F(2);p("ngIf",l.countries.length===0)("ngIfElse",v)}},dependencies:[M,y,ie,N],styles:["img[_ngcontent-%COMP%]{width:35px}"]});let e=t;return e})();function ye(e,t){e&1&&m(0,"shared-loading-spinner")}var ae=(()=>{let t=class t{constructor(n){this.serviceCountry=n,this.countries=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countries=this.serviceCountry.cacheStore.byCapital.countries,this.initialValue=this.serviceCountry.cacheStore.byCapital.term}searchByCapital(n){this.isLoading=!0,this.serviceCountry.searchCapital(n).subscribe(r=>{this.countries=r,this.isLoading=!1})}};t.\u0275fac=function(r){return new(r||t)(h(C))},t.\u0275cmp=g({type:t,selectors:[["app-by-capital-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por capital",3,"onValue","onDebounce","initialValue"],[4,"ngIf"],[3,"countries"]],template:function(r,l){r&1&&(a(0,"h2"),c(1,"Por capital"),i(),m(2,"hr"),a(3,"div",0)(4,"div",1)(5,"shared-search-box",2),S("onValue",function(x){return l.searchByCapital(x)})("onDebounce",function(x){return l.searchByCapital(x)}),i()()(),a(6,"div",0)(7,"div",1),m(8,"hr"),f(9,ye,1,0,"shared-loading-spinner",3),m(10,"countries-table",4),i()()),r&2&&(s(5),p("initialValue",l.initialValue),s(4),p("ngIf",l.isLoading),s(),p("countries",l.countries))},dependencies:[y,O,I,E],encapsulation:2});let e=t;return e})();function Ce(e,t){e&1&&m(0,"shared-loading-spinner")}var se=(()=>{let t=class t{constructor(n){this.serviceCountry=n,this.countries=[],this.isLoading=!1,this.initialValue=""}ngOnInit(){this.countries=this.serviceCountry.cacheStore.byCountries.countries,this.initialValue=this.serviceCountry.cacheStore.byCountries.term}searchByCountry(n){this.isLoading=!0,this.serviceCountry.searchCountry(n).subscribe(r=>{this.countries=r,this.isLoading=!1})}};t.\u0275fac=function(r){return new(r||t)(h(C))},t.\u0275cmp=g({type:t,selectors:[["app-by-country-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por pa\xEDs",3,"onValue","onDebounce","initialValue"],[4,"ngIf"],[3,"countries"]],template:function(r,l){r&1&&(a(0,"h2"),c(1,"Por pais"),i(),m(2,"hr"),a(3,"div",0)(4,"div",1)(5,"shared-search-box",2),S("onValue",function(x){return l.searchByCountry(x)})("onDebounce",function(x){return l.searchByCountry(x)}),i()()(),a(6,"div",0)(7,"div",1),m(8,"hr"),f(9,Ce,1,0,"shared-loading-spinner",3),m(10,"countries-table",4),i()()),r&2&&(s(5),p("initialValue",l.initialValue),s(4),p("ngIf",l.isLoading),s(),p("countries",l.countries))},dependencies:[y,O,I,E],encapsulation:2});let e=t;return e})();var ve=e=>({"btn-outline-primary":e});function xe(e,t){if(e&1){let o=X();a(0,"button",6),S("click",function(){let r=Q(o).$implicit,l=d();return W(l.searchByRegion(r))}),c(1),i()}if(e&2){let o=t.$implicit,n=d();p("ngClass",L(2,ve,n.selectedRegion===o)),s(),T(" ",o," ")}}function _e(e,t){e&1&&m(0,"shared-loading-spinner")}var ce=(()=>{let t=class t{constructor(n){this.serviceCountry=n,this.countries=[],this.regions=["Africa","Americas","Asia","Europe","Oceania"],this.selectedRegion="Africa",this.isLoading=!1}ngOnInit(){this.countries=this.serviceCountry.cacheStore.byRegion.countries,this.selectedRegion=this.serviceCountry.cacheStore.byRegion.region}searchByRegion(n){this.isLoading=!0,this.serviceCountry.searchRegion(n).subscribe(r=>{this.countries=r,this.isLoading=!1,this.selectedRegion=n})}};t.\u0275fac=function(r){return new(r||t)(h(C))},t.\u0275cmp=g({type:t,selectors:[["app-by-region-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col","text-center"],["class","btn mx-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col"],[4,"ngIf"],[3,"countries"],[1,"btn","mx-2",3,"click","ngClass"]],template:function(r,l){r&1&&(a(0,"h2"),c(1,"Por regi\xF3n"),i(),m(2,"hr"),a(3,"div",0)(4,"div",1),f(5,xe,2,4,"button",2),i()(),a(6,"div",0)(7,"div",3),m(8,"hr"),f(9,_e,1,0,"shared-loading-spinner",4),m(10,"countries-table",5),i()()),r&2&&(s(5),p("ngForOf",l.regions),s(4),p("ngIf",l.isLoading),s(),p("countries",l.countries))},dependencies:[Y,M,y,I,E],encapsulation:2});let e=t;return e})();function be(e,t){e&1&&(a(0,"div",2),c(1," Espere por favor "),i())}function Se(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.ara.common)}}function Ie(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.bre.common)}}function Ee(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.ces.common)}}function Te(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.cym.common)}}function Pe(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.deu.common)}}function Be(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.est.common)}}function Re(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.fin.common)}}function Fe(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.ita.common)}}function Le(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.kor.common)}}function we(e,t){if(e&1&&(a(0,"span",13),c(1),i()),e&2){let o=d(2);s(),u(o.country.translations.per.common)}}function Ve(e,t){if(e&1&&(a(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),c(4,"Pais: "),a(5,"strong"),c(6),i()(),m(7,"hr"),i()(),a(8,"div",3)(9,"div",5)(10,"h3"),c(11,"Bandera"),i(),m(12,"img",6),i(),a(13,"div",7)(14,"h3"),c(15,"Informaci\xF3n"),i(),a(16,"ul",8)(17,"li",9)(18,"strong"),c(19,"Poblaci\xF3n: "),i(),c(20),w(21,"number"),i(),a(22,"li",9)(23,"strong"),c(24,"C\xF3digo: "),i(),c(25),i()()()(),a(26,"div",10)(27,"div",7)(28,"h3"),c(29,"Traducciones"),i(),a(30,"div",11)(31,"div",11),f(32,Se,2,1,"span",12)(33,Ie,2,1,"span",12)(34,Ee,2,1,"span",12)(35,Te,2,1,"span",12)(36,Pe,2,1,"span",12)(37,Be,2,1,"span",12)(38,Re,2,1,"span",12)(39,Fe,2,1,"span",12)(40,Le,2,1,"span",12)(41,we,2,1,"span",12),i()()()()()),e&2){let o=d();s(6),u(o.country.name.common),s(6),p("src",o.country.flags.svg,R)("alt",o.country.name.common),s(8),T("",V(21,15,o.country.population)," "),s(5),T("",o.country.cca3," "),s(7),p("ngIf",o.country.translations.ara),s(),p("ngIf",o.country.translations.bre),s(),p("ngIf",o.country.translations.ces),s(),p("ngIf",o.country.translations.cym),s(),p("ngIf",o.country.translations.deu),s(),p("ngIf",o.country.translations.est),s(),p("ngIf",o.country.translations.fin),s(),p("ngIf",o.country.translations.ita),s(),p("ngIf",o.country.translations.kor),s(),p("ngIf",o.country.translations.per)}}var le=(()=>{let t=class t{constructor(n,r,l){this.activatedRoute=n,this.countriesService=r,this.router=l}ngOnInit(){this.activatedRoute.params.pipe(H(({id:n})=>this.countriesService.searchCountryByAlphaCode(n))).subscribe(n=>n?this.country=n:this.router.navigateByUrl(""))}};t.\u0275fac=function(r){return new(r||t)(h(te),h(C),h(ne))},t.\u0275cmp=g({type:t,selectors:[["app-country-page"]],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"alert","alert-info","text-center"],[1,"row"],[1,"col-12"],[1,"col-4"],[1,"img-thumbnail",3,"src","alt"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap"],["class","badge bg-primary m-1",4,"ngIf"],[1,"badge","bg-primary","m-1"]],template:function(r,l){if(r&1&&f(0,be,2,0,"ng-template",null,0,D)(2,Ve,42,17,"div",1),r&2){let v=F(1);s(2),p("ngIf",l.country)("ngIfElse",v)}},dependencies:[y,N],encapsulation:2});let e=t;return e})();var De=[{path:"by-capital",component:ae},{path:"by-country",component:se},{path:"by-region",component:ce},{path:"by/:id",component:le},{path:"**",redirectTo:"by-capital"}],pe=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=B({type:t}),t.\u0275inj=P({imports:[U.forChild(De),U]});let e=t;return e})();var st=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=B({type:t}),t.\u0275inj=P({imports:[Z,pe,oe]});let e=t;return e})();export{st as CountriesModule};
